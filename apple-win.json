{
  "id": "apple-drivers-win",
  "title": "Apple drivers (install-once, auto-cleanup)",
  "release": {
    "direct": "https://github.com/jaydumisuni/Apple-windows-drivers/releases/download/v1/Apple.windows.drivers.zip"
  },
  "install": {
    "type": "exec",
    "path": "powershell",
    "args": [
      "-NoProfile",
      "-ExecutionPolicy", "Bypass",
      "-File",
      "{cache_root}/TechGuyCheckm8/tools/win/install_apple_drivers.ps1",
      "-ZipPath",
      "{cache_root}/Apple.windows.drivers.zip"
    ]
  },
  "check": {
    "type": "exec_ok",
    "path": "powershell",
    "args": [
      "-NoProfile",
      "-Command",
      "$ok1 = @(Get-ChildItem 'HKLM:\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Uninstall','HKLM:\\SOFTWARE\\WOW6432Node\\Microsoft\\Windows\\CurrentVersion\\Uninstall' -ErrorAction SilentlyContinue | ForEach-Object { try { (Get-ItemProperty $_.PSPath).DisplayName } catch {} } | Where-Object { $_ -match 'Apple Mobile Device Support' }).Count -gt 0; $ok2 = (pnputil /enum-drivers | Out-String) -match 'Apple Mobile Device USB DFU'; if ($ok1 -and $ok2) { exit 0 } else { exit 1 }"
    ]
  },
  "notes": "Installs Apple Mobile Device Support + DFU driver if missing, then deletes installers. Arduino libs are staged to assets; installers are not kept."
}
