{
  "version": "2.5",
  "os": "mac",
  "items": [
    {
      "id": "checkm8-pack",
      "title": "TechGuy Checkm8 Pack",
      "release": { "direct": "https://github.com/jaydumisuni/TechGuyCheckm8/releases/latest/download/TechGuyCheckm8.zip" },
      "install": { "type": "unzip", "dest": "{cache_root}/" },
      "check": {
        "type": "multi_any",
        "checks": [
          { "type": "exec_ok", "path": "{cache_root}/TechGuyCheckm8/tools/mac/irecovery", "args": ["-V"] },
          { "type": "file_exists", "path": "{cache_root}/TechGuyCheckm8/tools/mac/irecovery" }
        ]
      }
    },
    {
      "id": "pyusb-runtime-mac",
      "title": "pyusb (python) runtime",
      "check": { "type": "exec_ok", "path": "python3", "args": ["-c", "import usb; print(usb.__version__)"] },
      "notes": "If this fails: python3 -m pip install pyusb. Also ensure libusb is installed (brew install libusb)."
    },
    {
      "id": "libimobile-mac",
      "title": "libimobiledevice (mac)",
      "check": { "type": "exec_ok", "path": "ideviceinfo", "args": ["-h"] },
      "notes": "If this fails: brew install libimobiledevice usbmuxd --HEAD"
    },
    {
      "id": "ipwndfu-mac",
      "title": "ipwndfu (mac)",
      "release": { "direct": "https://github.com/jaydumisuni/ipwndfu/archive/refs/heads/master.zip" },
      "install": { "type": "unzip", "dest": "{cache_root}/TechGuyCheckm8/tools/mac/" },
      "check": { "type": "exec_ok", "path": "python3", "args": ["{cache_root}/TechGuyCheckm8/tools/mac/ipwndfu-master/ipwndfu", "-h"] }
    },
    {
      "id": "arduino-cli-mac",
      "title": "Arduino CLI (mac)",
      "check": { "type": "exec_ok", "path": "arduino-cli", "args": ["version"] },
      "notes": "If this fails: brew install arduino-cli"
    },
    {
      "id": "arduino-helper-present-mac",
      "title": "Arduino status helper present (mac)",
      "install": {
        "type": "exec",
        "path": "/usr/bin/env",
        "args": [
          "bash",
          "-lc",
          "dst='{cache_root}/TechGuyCheckm8/tools/mac'; mkdir -p \"$dst\"; printf '#!/usr/bin/env python3\\n# stub helper (OK to replace)\\nprint(\"arduino helper present\")\\n' > \"$dst/arduino_status.py\"; chmod +x \"$dst/arduino_status.py\""
        ]
      },
      "check": { "type": "file_exists", "path": "{cache_root}/TechGuyCheckm8/tools/mac/arduino_status.py" },
      "notes": "Helper script used by the GUI to detect Arduino ports and connection state."
    }
  ]
}
